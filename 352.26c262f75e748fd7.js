"use strict";(self.webpackChunkAngularBase=self.webpackChunkAngularBase||[]).push([[352],{4352:(ge,T,d)=>{d.r(T),d.d(T,{EmployeeModule:()=>fe});var R=d(8703),O=d(2241),I=d(7215),p=d(1995),N=d(364),h=d(3189),e=d(8274),u=d(3794),y=d(805),f=d(6895),D=d(5593),_=d(1493),w=d(2137),b=d(4930),n=d(4006),l=d(850),q=d(7351),C=d(9070);let M=(()=>{class i{constructor(t,o){this.allDDLService=t,this.equipmentService=o,this.action=p.a.ADD,this.closeDialog=new e.vpe,this.equipmentFormGroup=new n.cw({plantNumber:new n.NI(null,[n.kI.required]),serialNumber:new n.NI(null,[n.kI.required]),standard:new n.NI(null,[n.kI.required]),discription:new n.NI(null,[n.kI.required]),location:new n.NI(null,[n.kI.required]),swl:new n.NI(null,[n.kI.required]),manufacturer:new n.NI(null,[n.kI.required]),loadTestNumber:new n.NI(null,[n.kI.required]),loadTestCompany:new n.NI(null,[n.kI.required]),comment:new n.NI(null),client:new n.NI(null,[n.kI.required]),department:new n.NI(null,[n.kI.required]),installation:new n.NI(null,[n.kI.required]),category:new n.NI(null,[n.kI.required]),type:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Plant Number",formControlName:"plantNumber",type:"number",id:"plantNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Serial Number",formControlName:"serialNumber",type:"text",id:"serialNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"standard",formControlName:"standard",type:"text",id:"standard",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Discription",formControlName:"discription",type:"text",id:"discription",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Location",formControlName:"location",type:"text",id:"location",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"swl",formControlName:"swl",type:"text",id:"swl",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Manufacturer",formControlName:"manufacturer",type:"text",id:"manufacturer",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Load Test Number",formControlName:"loadTestNumber",type:"text",id:"loadTestNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Load Test Company",formControlName:"loadTestCompany",type:"text",id:"loadTestCompany",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Comment",formControlName:"comment",type:"text",id:"comment",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Client",formControlName:"client",type:"text",id:"client",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Department",formControlName:"department",type:"text",id:"department",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Installation",formControlName:"installation",type:"text",id:"installation",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Category",formControlName:"category",type:"text",id:"category",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Type",formControlName:"type",type:"text",id:"type",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}}]}ngOnInit(){this.getAllDDLData(),this.setFormDataAccordingToAction()}getAllDDLData(){const t=this.inputs.find(c=>"client"===c.formControlName);this.allDDLService.getEmployeeDDL("client/DDL").subscribe(c=>{t.dropdownOpt.options=c.result});const o=this.inputs.find(c=>"department"===c.formControlName);this.allDDLService.getEmployeeDDL("department/DDL").subscribe(c=>{o.dropdownOpt.options=c.result});const r=this.inputs.find(c=>"installation"===c.formControlName);this.allDDLService.getEmployeeDDL("installation/DDL").subscribe(c=>{r.dropdownOpt.options=c.result});const s=this.inputs.find(c=>"category"===c.formControlName);this.allDDLService.getEmployeeDDL("category/DDL").subscribe(c=>{s.dropdownOpt.options=c.result});const g=this.inputs.find(c=>"type"===c.formControlName);this.allDDLService.getEmployeeDDL("type/DDL").subscribe(c=>{g.dropdownOpt.options=c.result})}setFormDataAccordingToAction(){switch(this.action){case"details":this.getFormDataByID(),this.equipmentFormGroup.disable();break;case"edit":this.getFormDataByID()}}getFormDataByID(){this.equipmentService.getByID(this.equId,"employee/equipment").subscribe(t=>{this.setFormGroupData(t.result)})}setFormGroupData(t){const o=Object.keys(this.equipmentFormGroup.controls);let r=Object.keys(t).filter(s=>o.includes(s)).reduce((s,g)=>(s[g]=t[g],s),{});this.equipmentFormGroup.patchValue(r)}formSubmitted(t){switch(this.action){case"add":let o={...t.value};this.callCrudApi(o);break;case"edit":let r={...t.value};this.callCrudApi(r)}}callCrudApi(t){switch(this.action){case"add":this.equipmentService.add(t,"employee/equipment").subscribe(o=>{o.success&&this.closeDialog.emit()});break;case"edit":this.equipmentService.update(t,this.equId,"employee/equipment").subscribe(o=>{o.success&&this.closeDialog.emit()})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.z),e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-equipment-employee-dialog-content"]],inputs:{action:"action",equId:"equId"},outputs:{closeDialog:"closeDialog"},decls:1,vars:3,consts:[[3,"inputs","formControlFromParent","action","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(s){return o.formSubmitted(s)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.equipmentFormGroup)("action",o.action)},dependencies:[C.E]}),i})();var v=d(4463);function x(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-equipment-employee-dialog-content",6),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("action",t.action)("equId",t.equId)}}const P=function(){return{width:"50vw"}},L=function(){return{"960px":"75vw","640px":"100vw"}},S=function(){return{width:"450px"}};let k=(()=>{class i extends h.c{constructor(t,o,r){super(r),this.equipmentService=t,this.confirmationService=o,this.cols=[],this.equId="",this.equipments=[],this.display=!1,this.action="new",this.pageTitle="Equipment",this.reportAction=[{actionFunction:"report",icon:"pi pi-file",isConditionalAction:!0,style:"p-button-rounded p-button-warning"}]}ngOnInit(){this.getAllEquipments()}getAllEquipments(){this.cols=[{field:"defectLevel",header:"Defect Level",rowType:p.b.ICON,enumTdObj:{[N.I.LOW]:"bg-success pi pi-file rounded text-white p-2",[N.I.MEDIUM]:"bg-warning pi pi-file rounded text-white p-2",[N.I.HIGH]:"bg-danger pi pi-file rounded text-white p-2",null:"bg-secondary pi pi-file rounded text-white p-2"}},{field:"plantNumber",header:"plantNumber",rowType:p.b.NORMAL},{field:"serialNumber",header:"serialNumber",rowType:p.b.NORMAL},{field:"standard",header:"standard",rowType:p.b.NORMAL},{field:"discription",header:"discription",rowType:p.b.NORMAL},{field:"location",header:"location",rowType:p.b.NORMAL},{field:"swl",header:"swl",rowType:p.b.NORMAL},{field:"manufacturer",header:"manufacturer",rowType:p.b.NORMAL},{field:"loadTestNumber",header:"loadTestNumber",rowType:p.b.NORMAL},{field:"loadTestCompany",header:"loadTestCompany",rowType:p.b.NORMAL},{field:"comment",header:"comment",rowType:p.b.NORMAL},{field:"clientName",header:"clientName",rowType:p.b.NORMAL},{field:"departmentName",header:"departmentName",rowType:p.b.NORMAL},{field:"installationName",header:"installationName",rowType:p.b.NORMAL},{field:"categoryName",header:"categoryName",rowType:p.b.NORMAL},{field:"typeName",header:"typeName",rowType:p.b.NORMAL}],this.equipmentService.getAll("employee/equipment").subscribe(t=>{t.success&&(this.equipments=t.result)})}callAction(t){switch(this.equId=t.id,t.action){case"add":this.action="add",this.display=!0;break;case"details":this.action="details",this.display=!0;break;case"edit":this.action="edit",this.display=!0;break;case"delete":this.delete();break;case"report":this.goToReports()}}goToReports(){this.router.navigate(["/employeepanel/report/"+this.equId])}delete(){this.confirmationService.confirm({message:"Are you sure you want to delete?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.equipmentService.delete(this.equId,"employee/equipment").subscribe(t=>{t.success&&this.close()})}})}close(){this.display=!1,this.getAllEquipments()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I),e.Y36(y.YP),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-equipment-employee-page"]],features:[e.qOj],decls:10,vars:23,consts:[[1,"header","d-flex","justify-content-between","p-3"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"mr-2","rounded",3,"click"],[3,"isActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"action","equId","closeDialog",4,"ngIf"],["acceptButtonStyleClass","save-btn","rejectButtonStyleClass","cancel-btn",3,"acceptLabel","rejectLabel"],[3,"action","equId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return o.callAction({action:"add"})}),e.qZA()(),e.TgZ(4,"app-data-table",2),e.NdJ("actionClicked",function(s){return o.callAction(s)}),e.qZA(),e.TgZ(5,"p-dialog",3),e.NdJ("visibleChange",function(s){return o.display=s}),e.YNc(6,x,1,2,"app-equipment-employee-dialog-content",4),e.qZA(),e._UZ(7,"p-confirmDialog",5),e.ALo(8,"translate"),e.ALo(9,"translate")),2&t&&(e.xp6(2),e.hij("",o.pageTitle," Page"),e.xp6(2),e.Q6J("isActions",!0)("cols",o.cols)("data",o.equipments)("conditionalAction",o.reportAction),e.xp6(1),e.Akn(e.DdM(20,P)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(21,L))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display),e.xp6(1),e.Akn(e.DdM(22,S)),e.s9C("acceptLabel",e.lcZ(8,16,"YES")),e.s9C("rejectLabel",e.lcZ(9,18,"NO")))},dependencies:[f.O5,D.Hq,_.V,w.Q,b.Q,M,v.X$]}),i})();var m=d(8731),A=d(5648),Z=d(4247);let F=(()=>{class i{constructor(t,o){this.ddlService=t,this.reportService=o,this.action=p.a.ADD,this.closeDialog=new e.vpe,this.reportFormGroup=new n.cw({type:new n.NI(null,[n.kI.required]),examinationStandard:new n.NI(null,[n.kI.required]),dateOfExamination:new n.NI(null,[n.kI.required]),dateOfNextExamination:new n.NI(null,[n.kI.required]),jobNumber:new n.NI(null,[n.kI.required]),foundDefectDangerToPerson:new n.NI(null,[n.kI.required]),proofLoadApplied:new n.NI(null,[n.kI.required]),isImmediateDanger:new n.NI(null),isPotentialDanger:new n.NI(null),repairRenewalAlteration:new n.NI(null,[n.kI.required]),testsCarriedOut:new n.NI(null,[n.kI.required]),isFirstExamination:new n.NI(null),isEquipmentInstalledCorrectly:new n.NI(null),isEquipmentSafeToOperate:new n.NI(null)}),this.inputs=[{placeholder:"Equipment",formControlName:"equipment",type:"text",id:"equipment",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"serialNumber",optionValue:"_id"}},{placeholder:"Type",formControlName:"type",type:"text",id:"type",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:Object.values(m.C2)}},{placeholder:"Examination Standard",formControlName:"examinationStandard",type:"text",id:"examinationStandard",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Date Of Examination",formControlName:"dateOfExamination",type:"text",id:"dateOfExamination",errorMessage:"this field is required",element:l.Q.CALENDAR},{placeholder:"Date Of Next Examination",formControlName:"dateOfNextExamination",type:"text",id:"dateOfNextExamination",errorMessage:"this field is required",element:l.Q.CALENDAR},{placeholder:"Job Number",formControlName:"jobNumber",type:"text",id:"jobNumber",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"jobNumber",optionValue:"_id"}},{placeholder:"Defect Danger To Person",formControlName:"foundDefectDangerToPerson",type:"text",id:"foundDefectDangerToPerson",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Is Immediate Danger",formControlName:"isImmediateDanger",type:"text",id:"isImmediateDanger",errorMessage:"this field is required",element:l.Q.SWITCH},{placeholder:"Is Potential Danger",formControlName:"isPotentialDanger",type:"text",id:"isPotentialDanger",errorMessage:"this field is required",element:l.Q.SWITCH},{placeholder:"Proof Load Applied",formControlName:"proofLoadApplied",type:"text",id:"proofLoadApplied",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Repair Renewal Alteration",formControlName:"repairRenewalAlteration",type:"text",id:"repairRenewalAlteration",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Tests Carried Out",formControlName:"testsCarriedOut",type:"text",id:"testsCarriedOut",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Is First Examination",formControlName:"isFirstExamination",type:"text",id:"isFirstExamination",errorMessage:"this field is required",element:l.Q.SWITCH},{placeholder:"Is Equipment Installed Correctly",formControlName:"isEquipmentInstalledCorrectly",type:"text",id:"isEquipmentInstalledCorrectly",errorMessage:"this field is required",element:l.Q.SWITCH},{placeholder:"Is Equipment Safe To Operate",formControlName:"isEquipmentSafeToOperate",type:"text",id:"isEquipmentSafeToOperate",errorMessage:"this field is required",element:l.Q.SWITCH}]}ngOnInit(){this.getAllDDLData(),this.setFormDataAccordingToAction()}getAllDDLData(){const t=this.inputs.find(r=>"equipment"===r.formControlName);this.ddlService.getEmployeeDDL("equipment/DDL").subscribe(r=>{t.dropdownOpt.options=r.result});const o=this.inputs.find(r=>"jobNumber"===r.formControlName);this.ddlService.getEmployeeDDL("workorder/DDL").subscribe(r=>{o.dropdownOpt.options=r.result})}setFormDataAccordingToAction(){switch(this.action){case"details":this.getFormDataByID(),this.reportFormGroup.disable();break;case"edit":this.getFormDataByID()}}getFormDataByID(){this.reportService.getByID(this.reportId,"employee/report").subscribe(t=>{this.setFormGroupData(t.result)})}setFormGroupData(t){const o=Object.keys(this.reportFormGroup.controls);let r=Object.keys(t).filter(s=>o.includes(s)).reduce((s,g)=>(s[g]=t[g],s),{});this.reportFormGroup.patchValue(r)}formSubmitted(t){switch(this.action){case"add":let o={...t.value,equipment:this.equId};this.callCrudApi(o);break;case"edit":let r={...t.value};this.callCrudApi(r)}}callCrudApi(t){switch(this.action){case"add":this.reportService.add(t,"employee/report").subscribe(o=>{o.success&&this.closeDialog.emit()});break;case"edit":this.reportService.update(t,this.reportId,"employee/report").subscribe(o=>{o.success&&this.closeDialog.emit()})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.z),e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-report-dialog-content"]],inputs:{action:"action",reportId:"reportId",equId:"equId"},outputs:{closeDialog:"closeDialog"},decls:1,vars:3,consts:[[3,"inputs","formControlFromParent","action","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(s){return o.formSubmitted(s)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.reportFormGroup)("action",o.action)},dependencies:[C.E]}),i})();var Q=d(2453),U=d(5367);let J=(()=>{class i{constructor(t,o){this.defectReportService=t,this.messageService=o,this.closeDialog=new e.vpe,this.fileName="",this.base64Image="",this.image="",this.defectedReportFormGroup=new n.cw({name:new n.NI(null,[n.kI.required]),priority:new n.NI(null,[n.kI.required]),description:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Name",formControlName:"name",type:"text",id:"name",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Priority",formControlName:"priority",type:"text",id:"priority",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:Object.values(m.Sh)}},{placeholder:"Description",formControlName:"description",type:"text",id:"description",errorMessage:"this field is required",element:l.Q.TEXTAREA}]}ngOnInit(){}fileUploaded(t){this.fileName=t.fileName,this.base64Image=t.imageBase64}formSubmitted(t){if(this.base64Image){let o={...t.value,image:this.base64Image};this.callCrudApi(o)}else this.messageService.add({severity:"error",summary:"Error",detail:"Image is required"})}callCrudApi(t){this.defectReportService.addToID(t,this.reportId,"employee/report/defect").subscribe(o=>{o.success&&this.closeDialog.emit()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I),e.Y36(y.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-add-defect-to-report-dialog-content"]],inputs:{reportId:"reportId"},outputs:{closeDialog:"closeDialog"},decls:3,vars:3,consts:[["position","bottom-right"],[3,"changeFile","fileUploaded"],[3,"inputs","formControlFromParent","formSubmitted"]],template:function(t,o){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-file-uploader",1),e.NdJ("fileUploaded",function(s){return o.fileUploaded(s)}),e.qZA(),e.TgZ(2,"app-input-form",2),e.NdJ("formSubmitted",function(s){return o.formSubmitted(s)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("changeFile",!!o.image),e.xp6(1),e.Q6J("inputs",o.inputs)("formControlFromParent",o.defectedReportFormGroup))},dependencies:[Q.FN,C.E,U.G]}),i})();function j(i,a){if(1&i&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.AsE(" ",t," : ",o.equipmentInfo[t]," ")}}function Y(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-report-dialog-content",12),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("action",t.action)("reportId",t.reportId)("equId",t.equipmentID)}}function B(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-add-defect-to-report-dialog-content",13),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("reportId",t.reportId)}}const G=function(){return{width:"50vw"}},z=function(){return{"960px":"75vw","640px":"100vw"}},W=function(){return{width:"450px"}};let H=(()=>{class i extends h.c{constructor(t,o,r){super(r),this.reportService=t,this.confirmationService=o,this.equipmentID=this.route.snapshot.paramMap.get("equipmentID"),this.cols=[],this.reportId="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Report",this.defectReportAction=[{actionFunction:"defectToReport",icon:"pi pi-file-excel",isConditionalAction:!0,style:"p-button-rounded p-button-warning",conditionalByRow:{data:m.R8.UNCOMLPETED,field:"status"}}],this.isAddDefect=!1,this.equipmentInfoKeys=[]}ngOnInit(){this.getEquipmentInfo(),this.getAllReports()}getEquipmentInfo(){this.reportService.getByID(this.equipmentID,"employee/equipment/info").subscribe(t=>{t.success&&(this.equipmentInfo=t.result[0],delete this.equipmentInfo.__v,delete this.equipmentInfo._id,this.equipmentInfo=(0,A.tU)(this.equipmentInfo),this.equipmentInfoKeys=Object.keys(this.equipmentInfo))})}getAllReports(){this.cols=[{field:"reportName",header:"Report Name",rowType:p.b.NORMAL},{field:"dateOfExamination",header:"Date Of Examination",rowType:p.b.NORMAL},{field:"status",header:"Status",rowType:p.b.ENUM,enumTdObj:{[m.R8.COMPLETED]:"bg-success rounded text-white p-2",[m.R8.UNCOMLPETED]:"bg-danger rounded text-white p-2"}},{field:"inspector",header:"Inspector",rowType:p.b.NORMAL},{field:"createdAt",header:"createdAt",rowType:p.b.DATE}],this.reportService.getAll("employee/report/"+this.equipmentID+"/report").subscribe(t=>{t.success&&(this.reports=t.result)})}callAction(t){switch(this.reportId=t.id,t.action){case"add":this.action="add",this.display=!0;break;case"details":this.action="details",this.display=!0;break;case"edit":this.action="edit",this.display=!0;break;case"delete":this.delete();break;case"defectToReport":this.action="edit",this.display=!0,this.isAddDefect=!0}}delete(){this.confirmationService.confirm({message:"Are you sure you want to delete?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.reportService.delete(this.reportId,"employee/account").subscribe(t=>{t.success&&this.close()})}})}close(){this.display=!1,this.getAllReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I),e.Y36(y.YP),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-report-employee-page"]],features:[e.qOj],decls:16,vars:25,consts:[[1,"m-2","p-2","pt-0"],[1,"text-center","text-bg-success"],[1,"container","row","m-2","mt-0"],["class","col-12",4,"ngFor","ngForOf"],[1,"header","d-flex","justify-content-between","p-3"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"mr-2","rounded",3,"click"],[3,"isActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"action","reportId","equId","closeDialog",4,"ngIf"],[3,"reportId","closeDialog",4,"ngIf"],["acceptButtonStyleClass","save-btn","rejectButtonStyleClass","cancel-btn",3,"acceptLabel","rejectLabel"],[1,"col-12"],[3,"action","reportId","equId","closeDialog"],[3,"reportId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Equipment info"),e.qZA(),e.TgZ(3,"p-card",2),e.YNc(4,j,2,2,"div",3),e.qZA()(),e.TgZ(5,"div",4)(6,"h3"),e._uU(7),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return o.callAction({action:"add"})}),e.qZA()(),e.TgZ(9,"app-data-table",6),e.NdJ("actionClicked",function(s){return o.callAction(s)}),e.qZA(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(s){return o.display=s}),e.YNc(11,Y,1,3,"app-employee-report-dialog-content",8),e.YNc(12,B,1,1,"app-employee-add-defect-to-report-dialog-content",9),e.qZA(),e._UZ(13,"p-confirmDialog",10),e.ALo(14,"translate"),e.ALo(15,"translate")),2&t&&(e.xp6(4),e.Q6J("ngForOf",o.equipmentInfoKeys),e.xp6(3),e.hij("",o.pageTitle," Page"),e.xp6(2),e.Q6J("isActions",!0)("cols",o.cols)("data",o.reports)("conditionalAction",o.defectReportAction),e.xp6(1),e.Akn(e.DdM(22,G)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(23,z))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display&&!o.isAddDefect),e.xp6(1),e.Q6J("ngIf",o.display&&o.isAddDefect),e.xp6(1),e.Akn(e.DdM(24,W)),e.s9C("acceptLabel",e.lcZ(14,18,"YES")),e.s9C("rejectLabel",e.lcZ(15,20,"NO")))},dependencies:[f.sg,f.O5,D.Hq,_.V,w.Q,Z.Z,b.Q,F,J,v.X$]}),i})();var V=d(8498),X=d(7919);const K=function(i){return{"sidebar-collapsed":i}},$=function(i,a){return{"pi-chevron-left":i,"pi-chevron-right":a}},ee=function(i){return{content:i}};let te=(()=>{class i extends h.c{constructor(t,o){super(t),this.authService=o,this.visibleSidebar1=!1,this.isSidebarCollapsed=!1}ngOnInit(){localStorage.getItem("hoistLang")||localStorage.setItem("hoistLang","en-US"),this.items=[{label:"Dashboard",icon:"pi pi-fw pi-home",routerLink:"dashboard"},{label:"Equipments",icon:"pi pi-fw pi-wrench",routerLink:"equipment"},{label:"Client Notification",icon:"pi pi-bell",routerLink:"notification"}]}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}handleLogout(){this.authService.logout(!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36(V.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-layout-page"]],features:[e.qOj],decls:12,vars:11,consts:[[1,"position-relative"],[1,"d-flex","flex-column","flex-shrink-0","p-3","text-white","side-grediant-background","justify-content-between","sidebar",3,"ngClass"],["href","/adminpanel/dashboard",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","text-white","text-decoration-none"],["src","../../../assets/images/Final logo.png",1,"img-fluid",2,"height","30px","margin","0 auto"],[3,"model"],["pButton","","pRipple","","type","button","label","Logout","icon","pi pi-sign-out",1,"p-button-raised","p-button-danger","mt-2","fw-bold","text-start",3,"click"],["type","button",1,"btn","toggle-btn","position-absolute","translate-middle-y","btn-toggle-sidebar",3,"click"],[1,"pi",3,"ngClass"],[1,"d-flex","flex-column",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"a",2),e._UZ(4,"img",3),e.qZA(),e._UZ(5,"hr")(6,"p-panelMenu",4),e.qZA(),e.TgZ(7,"a",5),e.NdJ("click",function(){return o.handleLogout()}),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return o.toggleSidebar()}),e._UZ(9,"i",7),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"router-outlet"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,K,o.isSidebarCollapsed)),e.xp6(5),e.Q6J("model",o.items),e.xp6(3),e.Q6J("ngClass",e.WLB(6,$,o.isSidebarCollapsed,!o.isSidebarCollapsed)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ee,!o.isSidebarCollapsed)))},dependencies:[f.mk,I.lC,D.Hq,X.f3],styles:[".side-grediant-background[_ngcontent-%COMP%]{background:#f8f8f8}  .p-panelmenu .p-panelmenu-content .p-menuitem .p-menuitem-link .p-menuitem-text,   .p-panelmenu .p-panelmenu-content .p-menuitem .p-menuitem-link:not(.p-disabled):hover .p-menuitem-text{color:var(--bs-dark)!important}  .p-panelmenu-header-link, .p-menuitem[_ngcontent-%COMP%], .p-submenu-list[_ngcontent-%COMP%], .p-panelmenu[_ngcontent-%COMP%]   .p-panelmenu-content[_ngcontent-%COMP%]{color:var(--bs-dark)!important;background:transparent!important}  .p-panelmenu .p-panelmenu-header>a{border:none}  .p-panelmenu .p-panelmenu-header>a:focus{transition:all .7s ease-in-out;outline:none!important}  .p-panelmenu .p-panelmenu-header>a:hover{transition:all .3s ease-in-out;background-color:#bbbbbb41!important;color:#fff}  .p-panelmenu .p-panelmenu-content{background-color:#ececec!important;border:1px solid #ccc!important;box-shadow:0 2px 5px #0000001a!important}  .p-panelmenu .p-menuitem{padding:.5rem 1rem!important}  .p-panelmenu .p-menuitem-link{color:#fff!important}  .p-panelmenu .p-menuitem-link:hover{background-color:#e4e4e4!important;color:#fff!important}.sidebar-collapsed[_ngcontent-%COMP%]{display:none!important}.sidebar-collapsed[_ngcontent-%COMP%]{max-width:100vh!important;min-height:100vh!important}.btn-toggle-sidebar[_ngcontent-%COMP%]{background-color:#464646;color:#fff;left:0;top:70px;border:none;position:fixed!important;bottom:20vh;width:40px;height:40px;border-radius:50%;z-index:1000}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;min-height:100vh;z-index:1000;overflow-y:auto}.content[_ngcontent-%COMP%]{margin-left:235px}"]}),i})(),oe=(()=>{class i extends h.c{constructor(t,o){super(o),this.defectedReportService=t,this.cols=[],this.reportId="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Notification",this.goToDefectedAction=[{actionFunction:"goToDefected",icon:"pi pi-arrow-right",isConditionalAction:!0,style:"p-button-rounded p-button-info"}]}ngOnInit(){this.getAllReports()}getAllReports(){this.cols=[{field:"departmentName",header:"Department Name",rowType:p.b.NORMAL},{field:"serialNumber",header:"Serial Number",rowType:p.b.NORMAL},{field:"categoryName",header:"Category Name",rowType:p.b.NORMAL},{field:"typeName",header:"Type Name",rowType:p.b.NORMAL},{field:"location",header:"Location",rowType:p.b.NORMAL},{field:"reportName",header:"Report Name",rowType:p.b.NORMAL},{field:"createdAt",header:"Created At",rowType:p.b.DATE},{field:"defectLevel",header:"Defect Level",rowType:p.b.ENUM,enumTdObj:{[m.Sh.LOW]:"bg-success rounded text-white p-2",[m.Sh.MEDIUM]:"bg-warning rounded text-white p-2",[m.Sh.HIGH]:"bg-danger rounded text-white p-2"}},{field:"isClientRespond",header:"Did Client Respond",rowType:p.b.BOOLEAN},{field:"isInspectorRespond",header:"Did Inspector Respond",rowType:p.b.BOOLEAN},{field:"defectStatus",header:"Defect Status",rowType:p.b.ENUM,enumTdObj:{[m.tz.FIXED]:"bg-success rounded text-white p-2",[m.tz.IGNORED]:"bg-warning rounded text-white p-2",[m.tz.QUARANTINED]:"bg-danger rounded text-white p-2"}}],this.defectedReportService.getAll("employee/report/defect").subscribe(t=>{t.success&&(this.reports=t.result)})}callAction(t){this.reportId=t.id,this.goToDefected()}goToDefected(){this.router.navigate(["/employeepanel/notificationResponse/"+this.reportId])}close(){this.display=!1,this.getAllReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification-employee-page"]],features:[e.qOj],decls:4,vars:6,consts:[[1,"header","d-flex","justify-content-between","p-3"],[3,"isActions","isMainActions","cols","data","conditionalAction","actionClicked"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2),e.qZA()(),e.TgZ(3,"app-data-table",1),e.NdJ("actionClicked",function(s){return o.callAction(s)}),e.qZA()),2&t&&(e.xp6(2),e.hij("",o.pageTitle," Page"),e.xp6(1),e.Q6J("isActions",!0)("isMainActions",!1)("cols",o.cols)("data",o.reports)("conditionalAction",o.goToDefectedAction))},dependencies:[b.Q]}),i})();var E=d(2174);let ie=(()=>{class i{constructor(t){this.defectedReportsService=t,this.closeDialog=new e.vpe,this.defectedResponseFormGroup=new n.cw({inspectorResponse:new n.NI(null,[n.kI.required]),inspectorComment:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Inspector Comment",formControlName:"inspectorComment",type:"text",id:"inspectorComment",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Action",formControlName:"inspectorResponse",type:"text",id:"inspectorResponse",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:Object.values(m.Xt)}}]}ngOnInit(){}formSubmitted(t){let o={...t.value};this.callCrudApi(o)}callCrudApi(t){this.defectedReportsService.update(t,this.defectedReportId,"employee/report/defect").subscribe(o=>{o.success&&this.closeDialog.emit()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-notification-responsd-dialog-content"]],inputs:{defectedReportId:"defectedReportId"},outputs:{closeDialog:"closeDialog"},decls:1,vars:2,consts:[[3,"inputs","formControlFromParent","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(s){return o.formSubmitted(s)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.defectedResponseFormGroup)},dependencies:[C.E]}),i})();const ne=function(i){return{color:i}};function re(i,a){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"p",10),e._uU(3),e.qZA(),e.TgZ(4,"h3",11),e._uU(5),e.qZA()()()),2&i){const t=a.$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(t),e.xp6(1),e.Q6J("ngStyle",e.VKq(3,ne,o.reportInfo[t]?"initial":"red")),e.xp6(1),e.hij(" ",o.reportInfo[t]||"No Data"," ")}}function ae(i,a){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,re,6,5,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.reportInfoKeys)}}function pe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-notification-responsd-dialog-content",12),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("defectedReportId",t.defectedReportID)}}const le=function(){return{width:"50vw"}},se=function(){return{"960px":"75vw","640px":"100vw"}};let de=(()=>{class i extends h.c{constructor(t,o){super(o),this.defectedReportService=t,this.reportId=this.route.snapshot.paramMap.get("reportID"),this.cols=[],this.defectedReportID="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Response",this.defectReportAction=[{actionFunction:"changeResponse",icon:"pi pi-eject",isConditionalAction:!0,style:"p-button-rounded"}],this.reportInfoKeys=[]}ngOnInit(){this.getAllDefectedReports()}getAllDefectedReports(){this.cols=[{field:"name",header:"Name",rowType:p.b.NORMAL},{field:"description",header:"Description",rowType:p.b.NORMAL},{field:"image",header:"Image",rowType:p.b.IMAGE},{field:"status",header:"status",rowType:p.b.ENUM,enumTdObj:{[m.tz.FIXED]:"bg-success rounded text-white p-2",[m.tz.IGNORED]:"bg-warning rounded text-white p-2",[m.tz.QUARANTINED]:"bg-danger rounded text-white p-2"}},{field:"comment",header:"Comment",rowType:p.b.NORMAL},{field:"clientName",header:"Client Name",rowType:p.b.NORMAL}],this.defectedReportService.getByID(this.reportId,"employee/report/defect").subscribe(t=>{t.success&&(this.reports=t.result.defect,this.reportInfo=t.result,delete this.reportInfo.defect,delete this.reportInfo.__v,delete this.reportInfo._id,this.reportInfo=(0,A.tU)(this.reportInfo),this.reportInfo=(0,A.g$)(this.reportInfo),this.reportInfoKeys=Object.keys(this.reportInfo))})}callAction(t){this.defectedReportID=t.id,this.display=!0}close(){this.display=!1,this.getAllDefectedReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.I),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification-response-employee-page"]],features:[e.qOj],decls:7,vars:14,consts:[[1,"m-2","p-2","pt-0"],["header","Report info"],["pTemplate","content"],[3,"isActions","isMainActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"defectedReportId","closeDialog",4,"ngIf"],[1,"col-12","d-flex","flex-wrap","gap-4"],["class","wrapper",4,"ngFor","ngForOf"],[1,"wrapper"],[1,"single-card","px-4","py-1","shadow"],[1,"m-0"],[1,"mt-1",3,"ngStyle"],[3,"defectedReportId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p-accordion")(2,"p-accordionTab",1),e.YNc(3,ae,2,1,"ng-template",2),e.qZA()()(),e.TgZ(4,"app-data-table",3),e.NdJ("actionClicked",function(s){return o.callAction(s)}),e.qZA(),e.TgZ(5,"p-dialog",4),e.NdJ("visibleChange",function(s){return o.display=s}),e.YNc(6,pe,1,1,"app-employee-notification-responsd-dialog-content",5),e.qZA()),2&t&&(e.xp6(4),e.Q6J("isActions",!0)("isMainActions",!1)("cols",o.cols)("data",o.reports)("conditionalAction",o.defectReportAction),e.xp6(1),e.Akn(e.DdM(12,le)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(13,se))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display))},dependencies:[f.sg,f.O5,f.PC,y.jx,_.V,E.UQ,E.US,b.Q,ie],styles:[".single-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.single-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10 px}.single-card[_ngcontent-%COMP%]{border-left-width:5px;border-left-color:#0069d9;border-left-style:solid}.wrapper[_ngcontent-%COMP%]{max-width:20%}"]}),i})();const me=[{path:"",component:te,children:[{path:"dashboard",component:d(2397).c},{path:"equipment",component:k},{path:"notification",component:oe},{path:"report/:equipmentID",component:H},{path:"notificationResponse/:reportID",component:de}]}];let ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[I.Bz.forChild(me),I.Bz]}),i})(),fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[y.YP],imports:[R.h,O.L,ue]}),i})()}}]);