"use strict";(self.webpackChunkAngularBase=self.webpackChunkAngularBase||[]).push([[288],{8132:(D,_,t)=>{t.r(_),t.d(_,{AuthModule:()=>M});var a=t(7215),g=t(583),i=t(8274);const m=[{path:"",children:[{path:"login",component:g.L}]}];let l=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[a.Bz.forChild(m),a.Bz]}),s})();var p=t(4833);let M=(()=>{class s{}return s.\u0275fac=function(f){return new(f||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[p.h,l]}),s})()},8498:(D,_,t)=>{t.d(_,{$:()=>s});var a=t(8165),g=t(529),i=t(5577),m=t(262),l=t(2843),p=t(8274),M=t(7215);let s=(()=>{class u extends a.gF{constructor(r,n){super(r),this.router=n,this.AUTH_BACK=this.BACKEND+"auth/"}login(r){let n=this.AUTH_BACK+"login";n=n.replace(/[?&]$/,"");const c=JSON.stringify(r);let A={...this.optionsConfig,body:c};return this.http.request("post",n,A).pipe((0,i.z)(e=>(0,a.zx)(e))).pipe((0,m.K)(e=>{if(!(e instanceof g.QO))return(0,l._)(e);try{return(0,a.zx)(e)}catch(o){return(0,l._)(o)}}))}handleAuthData(r,n,c,A){const e=this.getTokenPayload(r);let o=Date.now();const d=1e3*e.exp-o,v=new Date(1e3*e.exp);localStorage.setItem("hoisttoken",r),localStorage.setItem("hoistexp",v.toISOString()),localStorage.setItem("hoistId",n),localStorage.setItem("hoistName",c),localStorage.setItem("hoistRole",A),setTimeout(()=>{this.logout()},d)}getTokenPayload(r){return JSON.parse(atob(r.split(".")[1]))}logout(r=!0){this.logoutApi().subscribe(n=>{"success"==n.message&&(localStorage.removeItem("hoisttoken"),localStorage.removeItem("hoistexp"),localStorage.removeItem("hoistId"),localStorage.removeItem("hoistName"),localStorage.removeItem("hoistImg"),r&&this.router.navigate(["/authentication/login"]))})}logoutApi(){let r=this.AUTH_BACK+"logout";r=r.replace(/[?&]$/,"");let n={...this.optionsConfig};return this.http.request("post",r,n).pipe((0,i.z)(c=>(0,a.zx)(c))).pipe((0,m.K)(c=>{if(!(c instanceof g.QO))return(0,l._)(c);try{return(0,a.zx)(c)}catch(A){return(0,l._)(A)}}))}}return u.\u0275fac=function(r){return new(r||u)(p.LFG(p.zs3),p.LFG(M.F0))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3189:(D,_,t)=>{t.d(_,{c:()=>i});var a=t(7215),g=t(4463);class i{constructor(l){this.mainBreadCrumb="",this.mainBreadCrumbLink="",this.subBreadCrumb="",this.Translate=l.get(g.sK),this.route=l.get(a.gz),this.router=l.get(a.F0),this.Translate.use(localStorage.getItem("hoistLang")||"en-US"),this.isEnglish="en-US"==this.Translate.currentLang}}},8165:(D,_,t)=>{t.d(_,{gF:()=>u,zx:()=>r});var a=t(529),g=t(5577),i=t(9646),m=t(9751),l=t(2843),p=t(8076),M=t(7400),s=t(805);class u{constructor(o){this.optionsConfig={observe:"response",responseType:"blob",headers:new a.WM({"Content-Type":"application/json",Accept:"text/plain"})},this.http=o.get(a.eN),this.appConfigServices=o.get(p._),this.BACKEND=this.appConfigServices?.appConfig?.baseURL}}function r(e){const o=e.status,d=e instanceof a.Zn?e.body:e.error instanceof Blob?e.error:void 0;let v={};if(e.headers)for(let E of e.headers.keys())v[E]=e.headers.get(E);return 200===o||201===o?c(d).pipe((0,g.z)(E=>{let h=null;return h=""===E?null:JSON.parse(E,void 0),h?.message&&"success"!=h.message&&!/^\d+$/.test(h?.message)&&n().add({severity:"success",summary:" success",detail:h?.message,life:3e3}),(0,i.of)(h)})):500==o?(n().add({severity:"error",summary:"failed",detail:"An unexpected server error occurred.",life:3e3}),new m.y):200!==o&&204!==o?c(d).pipe((0,g.z)(E=>function A(e,o,d,v,E){var h=d?JSON.parse(d):null,O=h?.message?h.message:h?.title;return null==O||null==O?401==o?n().add({severity:"error",summary:o.toString(),detail:"you are not Authorized",life:3e3}):n().add({severity:"error",summary:o.toString(),detail:e,life:3e3}):n().add({severity:"error",summary:o.toString(),detail:O,life:3e3}),(0,l._)(O)}("An unexpected server error occurred.",o,E))):(0,i.of)(null)}function n(){return M.k0.get(s.ez)}function c(e){return new m.y(o=>{if(e){let d=new FileReader;d.onload=v=>{o.next(v.target.result),o.complete()},d.readAsText(e)}else o.next(""),o.complete()})}}}]);