"use strict";(self.webpackChunkAngularBase=self.webpackChunkAngularBase||[]).push([[592],{583:(O,P,t)=>{t.d(P,{L:()=>v});var o=t(4006),g=t(965),c=t(206),m=t(3189),e=t(8274),_=t(8498),h=t(6895),d=t(7215),a=t(1740),u=t(3425);function i(r,E){1&r&&(e.TgZ(0,"p",18),e._uU(1," Email is required "),e.qZA())}function l(r,E){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,i,2,0,"p",17),e.qZA()),2&r){const s=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=s.loginForm.get("email"))?null:n.getError("required"))}}function f(r,E){1&r&&(e.TgZ(0,"p",20),e._uU(1," Password is required "),e.qZA())}function p(r,E){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,f,2,0,"p",19),e.qZA()),2&r){const s=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",null==(n=s.loginForm.get("password"))?null:n.getError("required"))}}let v=(()=>{class r extends m.c{constructor(s,n){super(s),this.authService=n,this.isError=!1,this.loginForm=new o.cw({email:new o.NI(null,[o.kI.required,o.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]),password:new o.NI(null,[o.kI.required])}),this.pass=""}ngOnInit(){}login(){let s=new g.x;s.password=this.loginForm.value.password,s.email=this.loginForm.value.email,this.loginForm.valid&&this.authService.login(s).subscribe(n=>{n?.result?.token&&(this.authService.handleAuthData(n.result.token,n.result.user._id,n.result.user.name,n.result.user.role),localStorage.getItem("hoistRole")==g.q.ADMIN?this.router.navigate(["/adminpanel/dashboard"]):localStorage.getItem("hoistRole")==g.q.Client?this.router.navigate(["/clientpanel/dashboard"]):(localStorage.getItem("hoistRole")==c.G.INSPECTOR||localStorage.getItem("hoistRole")==c.G.SUPERVISOR||localStorage.getItem("hoistRole")==c.G.TECHNICIAN)&&this.router.navigate(["/employeepanel/dashboard"]))})}}return r.\u0275fac=function(s){return new(s||r)(e.Y36(e.zs3),e.Y36(_.$))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login-page"]],features:[e.qOj],decls:24,vars:5,consts:[[1,"block-content","loginPage","bg-light"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"d-flex","justify-content-end"],["src","../../../assets/images/Final logo.png","height","60px","alt","Logo",1,"logo","mt-4","drop-shadow"],[1,"align-items-center","mt-3","d-flex","justify-content-center","lg:px-8","md:px-6","px-4","py-5","bg-dark","login-container"],[1,"surface-card","shadow-2","rounded","w-full","lg:w-20"],[1,"m-0","fw-bold","text-center","text-light","mb-5"],[3,"formGroup","ngSubmit"],[1,"mb-4"],["for","email",1,"mb-2","text-light","d-block"],["required","","id","email","formControlName","email","type","text","pInputText","",1,"p-inputtext-lg","w-full","bg-secondary"],[4,"ngIf"],["for","password",1,"mb-2","text-light","d-block"],["required","","inputId","password","formControlName","password",1,"p-inputtext-lg","bg-secondary",3,"feedback","toggleMask"],[1,"mt-2","mb-4","text-end"],["routerLink","/authentication/forgotPassword",1,"color-error","forgotPassword","text-blue-500","cursor-pointer","underline","text-decoration-underline"],[1,"btn","btn-lg","bg-primary","text-light","w-100",3,"disabled"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["class","text-danger","id","passValidate",4,"ngIf"],["id","passValidate",1,"text-danger"]],template:function(s,n){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"h2",6),e._uU(7,"REGISTER"),e.qZA(),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return n.login()}),e.TgZ(9,"div",8)(10,"label",9),e._uU(11,"E-mail"),e.qZA(),e._UZ(12,"input",10),e.YNc(13,l,2,1,"div",11),e.qZA(),e.TgZ(14,"div")(15,"label",12),e._uU(16," Password "),e.qZA(),e._UZ(17,"p-password",13),e.YNc(18,p,2,1,"div",11),e.qZA(),e.TgZ(19,"div",14)(20,"a",15),e._uU(21,"Forgot Password?"),e.qZA()(),e.TgZ(22,"button",16),e._uU(23," Login "),e.qZA()()()()()()),2&s){let C,x;e.xp6(8),e.Q6J("formGroup",n.loginForm),e.xp6(5),e.Q6J("ngIf",n.isError||n.loginForm.get("email")&&(null==(C=n.loginForm.get("email"))?null:C.touched)),e.xp6(4),e.Q6J("feedback",!1)("toggleMask",!0),e.xp6(1),e.Q6J("ngIf",n.isError||n.loginForm.get("password")&&(null==(x=n.loginForm.get("password"))?null:x.touched))}},dependencies:[h.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,d.yS,a.o,o.sg,o.u,u.ro],styles:[".login-container[_ngcontent-%COMP%]{width:35vw;border-radius:25px}.loginPage[_ngcontent-%COMP%]{background-image:url(login-background.b3aad121123d7020.svg);background-repeat:no-repeat;background-position:center;background-size:cover}@media (min-width: 320px) and (max-width: 768px){.login-container[_ngcontent-%COMP%]{width:100vw}.loginPage[_ngcontent-%COMP%]{background-image:none}.drop-shadow[_ngcontent-%COMP%]{filter:none!important}}.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 10px rgba(2,2,2,.7))}[_nghost-%COMP%]     .p-password .p-password-input{background-color:var(--bs-secondary)!important;color:#fff!important;border-radius:8px;width:25rem!important}input[_ngcontent-%COMP%]{width:25rem;border-radius:8px;color:#fff!important}@media (min-width: 320px) and (max-width: 766px){input[_ngcontent-%COMP%]{width:18rem}[_nghost-%COMP%]     .p-password .p-password-input{width:18rem!important}}@media (min-width: 767px) and (max-width: 1026px){.login-container[_ngcontent-%COMP%]{padding:35px 1px!important;width:60vw}}button[_ngcontent-%COMP%]:hover{transition:all .2s ease-in-out;background-color:#1a54b6!important}.forgotPassword[_ngcontent-%COMP%]:hover{transition:all .2s ease-in-out;color:#ff2121!important;text-decoration:none!important}"]}),r})()},7351:(O,P,t)=>{t.d(P,{z:()=>d});var o=t(529),g=t(8165),c=t(5577),m=t(262),e=t(2843),_=t(8274),h=t(7215);let d=(()=>{class a extends g.gF{constructor(i,l){super(i),this.router=l,this.AUTH_BACK=this.BACKEND}getDDL(i){let l=this.AUTH_BACK+"admin/"+i;l=l.replace(/[?&]$/,"");let f={...this.optionsConfig};return this.http.request("get",l,f).pipe((0,c.z)(p=>(0,g.zx)(p))).pipe((0,m.K)(p=>{if(!(p instanceof o.QO))return(0,e._)(p);try{return(0,g.zx)(p)}catch(v){return(0,e._)(v)}}))}getEmployeeDDL(i){let l=this.AUTH_BACK+"employee/"+i;l=l.replace(/[?&]$/,"");let f={...this.optionsConfig};return this.http.request("get",l,f).pipe((0,c.z)(p=>(0,g.zx)(p))).pipe((0,m.K)(p=>{if(!(p instanceof o.QO))return(0,e._)(p);try{return(0,g.zx)(p)}catch(v){return(0,e._)(v)}}))}}return a.\u0275fac=function(i){return new(i||a)(_.LFG(_.zs3),_.LFG(h.F0))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},5367:(O,P,t)=>{t.d(P,{G:()=>e});var o=t(8274),g=t(5648),c=t(805),m=t(9983);let e=(()=>{class _{constructor(d){this.messageService=d,this.changeFile=!1,this.fileUploaded=new o.vpe,this.uploadBtn={icon:"pi pi-plus",label:"Browse"}}ngOnChanges(){this.changeFile&&(this.uploadBtn={icon:"pi pi-replay",label:"Change"})}uploadFile(d){let a,u;if(d?.files[0]){const i=d?.files[0];(0,g.Nm)(i.objectURL.changingThisBreaksApplicationSecurity).then(l=>{a=(0,g.XI)(l),u=i.name,this.uploadBtn={icon:"pi-check",label:"Uploaded"},this.fileUploaded.emit({imageBase64:a,fileName:u})}).catch(l=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error uploading file",life:3e3}),a=null,u=null,this.uploadBtn={icon:"pi-times",label:"Error"},this.fileUploaded.emit({imageBase64:a,fileName:u})})}}}return _.\u0275fac=function(d){return new(d||_)(o.Y36(c.ez))},_.\u0275cmp=o.Xpm({type:_,selectors:[["app-file-uploader"]],inputs:{changeFile:"changeFile"},outputs:{fileUploaded:"fileUploaded"},features:[o.TTD],decls:1,vars:4,consts:[["mode","basic","accept","image/*","styleClass","save-btn",3,"auto","customUpload","chooseLabel","chooseIcon","uploadHandler"]],template:function(d,a){1&d&&(o.TgZ(0,"p-fileUpload",0),o.NdJ("uploadHandler",function(i){return a.uploadFile(i)}),o.qZA()),2&d&&o.Q6J("auto",!0)("customUpload",!0)("chooseLabel",a.uploadBtn.label)("chooseIcon",a.uploadBtn.icon)},dependencies:[m.p]}),_})()}}]);