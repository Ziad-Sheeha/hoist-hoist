"use strict";(self.webpackChunkAngularBase=self.webpackChunkAngularBase||[]).push([[703],{2703:(we,v,d)=>{d.r(v),d.d(v,{EmployeeModule:()=>Te});var x=d(4833),S=d(2241),A=d(7215),s=d(1995),h=d(364),y=d(3189),e=d(8274),g=d(3794),_=d(805),b=d(6895),I=d(5593),D=d(1493),T=d(2137),C=d(4930),n=d(4006),l=d(850),q=d(7351),N=d(9070);let L=(()=>{class i{constructor(t,o){this.allDDLService=t,this.equipmentService=o,this.action=s.a.ADD,this.isDublicate=!1,this.closeDialog=new e.vpe,this.equipmentFormGroup=new n.cw({plantNumber:new n.NI(null,[n.kI.required]),serialNumber:new n.NI(null,[n.kI.required]),standard:new n.NI(null,[n.kI.required]),discription:new n.NI(null,[n.kI.required]),location:new n.NI(null,[n.kI.required]),swl:new n.NI(null,[n.kI.required]),manufacturer:new n.NI(null,[n.kI.required]),loadTestNumber:new n.NI(null,[n.kI.required]),loadTestCompany:new n.NI(null,[n.kI.required]),comment:new n.NI(null),client:new n.NI(null,[n.kI.required]),department:new n.NI(null,[n.kI.required]),installation:new n.NI(null,[n.kI.required]),category:new n.NI(null,[n.kI.required]),type:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Plant Number",formControlName:"plantNumber",type:"number",id:"plantNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Serial Number",formControlName:"serialNumber",type:"text",id:"serialNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"standard",formControlName:"standard",type:"text",id:"standard",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Discription",formControlName:"discription",type:"text",id:"discription",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Location",formControlName:"location",type:"text",id:"location",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"swl",formControlName:"swl",type:"text",id:"swl",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Manufacturer",formControlName:"manufacturer",type:"text",id:"manufacturer",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Load Test Number",formControlName:"loadTestNumber",type:"text",id:"loadTestNumber",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Load Test Company",formControlName:"loadTestCompany",type:"text",id:"loadTestCompany",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Comment",formControlName:"comment",type:"text",id:"comment",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Client",formControlName:"client",type:"text",id:"client",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Department",formControlName:"department",type:"text",id:"department",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Installation",formControlName:"installation",type:"text",id:"installation",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Category",formControlName:"category",type:"text",id:"category",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}},{placeholder:"Type",formControlName:"type",type:"text",id:"type",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"name",optionValue:"_id"}}]}ngOnInit(){this.getAllDDLData(),this.setFormDataAccordingToAction()}getAllDDLData(){const t=this.inputs.find(c=>"client"===c.formControlName);this.allDDLService.getEmployeeDDL("client/DDL").subscribe(c=>{t.dropdownOpt.options=c.result});const o=this.inputs.find(c=>"department"===c.formControlName);this.allDDLService.getEmployeeDDL("department/DDL").subscribe(c=>{o.dropdownOpt.options=c.result});const r=this.inputs.find(c=>"installation"===c.formControlName);this.allDDLService.getEmployeeDDL("installation/DDL").subscribe(c=>{r.dropdownOpt.options=c.result});const a=this.inputs.find(c=>"category"===c.formControlName);this.allDDLService.getEmployeeDDL("category/DDL").subscribe(c=>{a.dropdownOpt.options=c.result});const f=this.inputs.find(c=>"type"===c.formControlName);this.allDDLService.getEmployeeDDL("type/DDL").subscribe(c=>{f.dropdownOpt.options=c.result});const m=this.inputs.find(c=>"standard"===c.formControlName);this.allDDLService.getEmployeeDDL("standard/DDL").subscribe(c=>{m.dropdownOpt.options=c.result})}setFormDataAccordingToAction(){switch(this.action){case"add":case"edit":this.getFormDataByID();break;case"details":this.getFormDataByID(),this.equipmentFormGroup.disable()}}getFormDataByID(){("add"!=this.action||this.isDublicate)&&this.equipmentService.getByID(this.equId,"employee/equipment").subscribe(t=>{this.setFormGroupData(t.result)})}setFormGroupData(t){const o=Object.keys(this.equipmentFormGroup.controls);let r=Object.keys(t).filter(a=>o.includes(a)).reduce((a,f)=>(a[f]=t[f],a),{});this.equipmentFormGroup.patchValue(r)}formSubmitted(t){switch(this.action){case"add":let o={...t.value};this.callCrudApi(o);break;case"edit":let r={...t.value};this.callCrudApi(r)}}callCrudApi(t){switch(this.action){case"add":this.equipmentService.add(t,"employee/equipment").subscribe(o=>{o.success&&this.closeDialog.emit()});break;case"edit":this.equipmentService.update(t,this.equId,"employee/equipment").subscribe(o=>{o.success&&this.closeDialog.emit()})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.z),e.Y36(g.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-equipment-employee-dialog-content"]],inputs:{action:"action",equId:"equId",isDublicate:"isDublicate"},outputs:{closeDialog:"closeDialog"},decls:1,vars:3,consts:[[3,"inputs","formControlFromParent","action","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(a){return o.formSubmitted(a)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.equipmentFormGroup)("action",o.action)},dependencies:[N.E]}),i})();var w=d(4463);function P(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-equipment-employee-dialog-content",6),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("action",t.action)("isDublicate",t.isDublicate)("equId",t.equId)}}const k=function(){return{width:"50vw"}},F=function(){return{"960px":"75vw","640px":"100vw"}},Z=function(){return{width:"450px"}};let Q=(()=>{class i extends y.c{constructor(t,o,r){super(r),this.equipmentService=t,this.confirmationService=o,this.cols=[],this.equId="",this.equipments=[],this.display=!1,this.isDublicate=!1,this.action="new",this.pageTitle="Equipment",this.reportAction=[{actionFunction:"dublicateEquipment",icon:"pi pi-copy",isConditionalAction:!0,style:"p-button-rounded p-button-info"},{actionFunction:"report",icon:"pi pi-file",isConditionalAction:!0,style:"p-button-rounded p-button-warning"}]}ngOnInit(){this.getAllEquipments()}getAllEquipments(){this.cols=[{field:"defectLevel",header:"Defect Level",rowType:s.b.ICON,enumTdObj:{[h.I.LOW]:"bg-success pi pi-file rounded text-white p-2",[h.I.MEDIUM]:"bg-warning pi pi-file rounded text-white p-2",[h.I.HIGH]:"bg-danger pi pi-file rounded text-white p-2",null:"bg-secondary pi pi-file rounded text-white p-2"}},{field:"plantNumber",header:"plantNumber",rowType:s.b.NORMAL},{field:"serialNumber",header:"serialNumber",rowType:s.b.NORMAL},{field:"standard",header:"standard",rowType:s.b.NORMAL},{field:"discription",header:"discription",rowType:s.b.NORMAL},{field:"location",header:"location",rowType:s.b.NORMAL},{field:"swl",header:"swl",rowType:s.b.NORMAL},{field:"manufacturer",header:"manufacturer",rowType:s.b.NORMAL},{field:"loadTestNumber",header:"loadTestNumber",rowType:s.b.NORMAL},{field:"loadTestCompany",header:"loadTestCompany",rowType:s.b.NORMAL},{field:"comment",header:"comment",rowType:s.b.NORMAL},{field:"clientName",header:"clientName",rowType:s.b.NORMAL},{field:"departmentName",header:"departmentName",rowType:s.b.NORMAL},{field:"installationName",header:"installationName",rowType:s.b.NORMAL},{field:"categoryName",header:"categoryName",rowType:s.b.NORMAL},{field:"typeName",header:"typeName",rowType:s.b.NORMAL}],this.equipmentService.getAll("employee/equipment").subscribe(t=>{t.success&&(this.equipments=t.result)})}callAction(t){switch(this.equId=t.id,this.isDublicate=!1,t.action){case"add":this.action="add",this.display=!0;break;case"details":this.action="details",this.display=!0;break;case"edit":this.action="edit",this.display=!0;break;case"delete":this.delete();break;case"dublicateEquipment":this.isDublicate=!0,this.action="add",this.display=!0;break;case"report":this.goToReports()}}goToReports(){this.router.navigate(["/employeepanel/report/"+this.equId])}delete(){this.confirmationService.confirm({message:"Are you sure you want to delete?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.equipmentService.delete(this.equId,"employee/equipment").subscribe(t=>{t.success&&this.close()})}})}close(){this.display=!1,this.getAllEquipments()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(_.YP),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-equipment-employee-page"]],features:[e.qOj],decls:10,vars:23,consts:[[1,"header","d-flex","justify-content-between","p-3"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"mr-2","rounded",3,"click"],[3,"isActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"action","isDublicate","equId","closeDialog",4,"ngIf"],["acceptButtonStyleClass","save-btn","rejectButtonStyleClass","cancel-btn",3,"acceptLabel","rejectLabel"],[3,"action","isDublicate","equId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return o.callAction({action:"add"})}),e.qZA()(),e.TgZ(4,"app-data-table",2),e.NdJ("actionClicked",function(a){return o.callAction(a)}),e.qZA(),e.TgZ(5,"p-dialog",3),e.NdJ("visibleChange",function(a){return o.display=a}),e.YNc(6,P,1,3,"app-equipment-employee-dialog-content",4),e.qZA(),e._UZ(7,"p-confirmDialog",5),e.ALo(8,"translate"),e.ALo(9,"translate")),2&t&&(e.xp6(2),e.hij("",o.pageTitle," Page"),e.xp6(2),e.Q6J("isActions",!0)("cols",o.cols)("data",o.equipments)("conditionalAction",o.reportAction),e.xp6(1),e.Akn(e.DdM(20,k)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(21,F))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display),e.xp6(1),e.Akn(e.DdM(22,Z)),e.s9C("acceptLabel",e.lcZ(8,16,"YES")),e.s9C("rejectLabel",e.lcZ(9,18,"NO")))},dependencies:[b.O5,I.Hq,D.V,T.Q,C.Q,L,w.X$]}),i})();var u=d(8731),R=d(5648),J=d(4247);let U=(()=>{class i extends y.c{constructor(t,o,r){super(r),this.ddlService=t,this.reportService=o,this.action=s.a.ADD,this.closeDialog=new e.vpe,this.reportFormGroup=new n.cw({type:new n.NI(null,[n.kI.required]),dateOfExamination:new n.NI(null,[n.kI.required]),dateOfNextExamination:new n.NI(null,[n.kI.required]),jobNumber:new n.NI(null,[n.kI.required]),foundDefectDangerToPerson:new n.NI(null),proofLoadApplied:new n.NI(null),isImmediateDanger:new n.NI({value:!1,disabled:!0}),isPotentialDanger:new n.NI({value:!1,disabled:!0}),repairRenewalAlteration:new n.NI(null,[n.kI.required]),testsCarriedOut:new n.NI(null,[n.kI.required]),isFirstExamination:new n.NI(!1),isEquipmentInstalledCorrectly:new n.NI({value:!1,disabled:!0}),isEquipmentSafeToOperate:new n.NI({value:!0,disabled:!0})}),this.installedCorrectlySwitch=(a,f)=>{let m=this.reportFormGroup.get("isEquipmentInstalledCorrectly");1==a.get("isFirstExamination")?.value?m?.enable():(m?.disable(),m?.setValue(!1)),m?.updateValueAndValidity()},this.notSafeSwitch=(a,f)=>{let m=this.reportFormGroup.get("isEquipmentSafeToOperate");1==a.get("isImmediateDanger")?.value||1==a.get("isPotentialDanger")?.value?m?.setValue(!1):m?.setValue(!0),m?.updateValueAndValidity()},this.enableRadioButtons=(a,f)=>{let m=this.reportFormGroup.get("isImmediateDanger"),c=this.reportFormGroup.get("isPotentialDanger"),M=this.reportFormGroup.get("isEquipmentSafeToOperate");a.get("foundDefectDangerToPerson")?.value?.length>0?(m?.enable(),c?.enable()):(m?.disable(),m?.setValue(!1),c?.disable(),c?.setValue(!1),M?.setValue(!0)),m?.updateValueAndValidity(),c?.updateValueAndValidity(),M?.updateValueAndValidity()},this.removeExtraInputs=(a,f)=>{let m=this.reportFormGroup.get("proofLoadApplied");a.get("type")?.value!=u.C2.PTCR?(m?.disable(),m?.setValue(null),m?.setValidators(null)):(m?.enable(),m?.setValidators([n.kI.required])),m?.updateValueAndValidity()},this.inputs=[{placeholder:"Type",formControlName:"type",type:"text",id:"type",errorMessage:"this field is required",conditinalFunction:this.removeExtraInputs,element:l.Q.DROPDOWM,dropdownOpt:{options:Object.values(u.C2)}},{placeholder:"Date Of Examination",formControlName:"dateOfExamination",type:"text",id:"dateOfExamination",errorMessage:"this field is required",element:l.Q.CALENDAR},{placeholder:"Date Of Next Examination",formControlName:"dateOfNextExamination",type:"text",id:"dateOfNextExamination",errorMessage:"this field is required",element:l.Q.CALENDAR},{placeholder:"Job Number",formControlName:"jobNumber",type:"text",id:"jobNumber",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[],optionLabel:"jobNumber",optionValue:"_id"}},{placeholder:"Proof Load Applied",formControlName:"proofLoadApplied",type:"text",id:"proofLoadApplied",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Defect Danger To Person",formControlName:"foundDefectDangerToPerson",type:"text",id:"foundDefectDangerToPerson",errorMessage:"this field is required",conditinalFunction:this.enableRadioButtons,element:l.Q.INPUT},{placeholder:"Is Immediate Danger",formControlName:"isImmediateDanger",type:"text",id:"isImmediateDanger",errorMessage:"this field is required",conditinalFunction:this.notSafeSwitch,element:l.Q.SWITCH},{placeholder:"Is Potential Danger",formControlName:"isPotentialDanger",type:"text",id:"isPotentialDanger",errorMessage:"this field is required",element:l.Q.SWITCH,conditinalFunction:this.notSafeSwitch,isSwitchLabel:!0,switchLabel:{true:"yes",false:"no"}},{placeholder:"Repair Renewal Alteration",formControlName:"repairRenewalAlteration",type:"text",id:"repairRenewalAlteration",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Tests Carried Out",formControlName:"testsCarriedOut",type:"text",id:"testsCarriedOut",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Is First Examination",formControlName:"isFirstExamination",type:"text",id:"isFirstExamination",errorMessage:"this field is required",conditinalFunction:this.installedCorrectlySwitch,element:l.Q.SWITCH},{placeholder:"Is Equipment Installed Correctly",formControlName:"isEquipmentInstalledCorrectly",type:"text",id:"isEquipmentInstalledCorrectly",errorMessage:"this field is required",element:l.Q.SWITCH},{placeholder:"Is Equipment Safe To Operate",formControlName:"isEquipmentSafeToOperate",type:"text",id:"isEquipmentSafeToOperate",errorMessage:"this field is required",element:l.Q.SWITCH}]}ngOnInit(){this.getAllDDLData(),this.setFormDataAccordingToAction()}getAllDDLData(){const t=this.inputs.find(r=>"equipment"===r.formControlName);this.ddlService.getEmployeeDDL("equipment/DDL").subscribe(r=>{t.dropdownOpt.options=r.result});const o=this.inputs.find(r=>"jobNumber"===r.formControlName);this.ddlService.getEmployeeDDL("workorder/DDL").subscribe(r=>{o.dropdownOpt.options=r.result})}setFormDataAccordingToAction(){switch(this.action){case"details":this.getFormDataByID(),this.reportFormGroup.disable();break;case"edit":this.getFormDataByID()}}getFormDataByID(){this.reportService.getByID(this.reportId,"employee/report").subscribe(t=>{this.setFormGroupData(t.result)})}setFormGroupData(t){const o=Object.keys(this.reportFormGroup.controls);let r=Object.keys(t).filter(a=>o.includes(a)).reduce((a,f)=>(a[f]=t[f],a),{});this.reportFormGroup.patchValue(r)}formSubmitted(t){switch(this.action){case"add":let o={...t.value,equipment:this.equId};this.callCrudApi(o);break;case"edit":let r={...t.value};this.callCrudApi(r)}}callCrudApi(t){switch(this.action){case"add":this.reportService.add(t,"employee/report").subscribe(o=>{o.success&&(this.router.navigate(["employeepanel/empSupReport/"+o.result?._id]),this.closeDialog.emit())});break;case"edit":this.reportService.update(t,this.reportId,"employee/report").subscribe(o=>{o.success&&this.closeDialog.emit()})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.z),e.Y36(g.I),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-report-dialog-content"]],inputs:{action:"action",reportId:"reportId",equId:"equId"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:1,vars:3,consts:[[3,"inputs","formControlFromParent","action","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(a){return o.formSubmitted(a)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.reportFormGroup)("action",o.action)},dependencies:[N.E]}),i})();var j=d(2453),B=d(5367);let E=(()=>{class i{constructor(t,o){this.defectReportService=t,this.messageService=o,this.closeDialog=new e.vpe,this.defectLevel=h.I.LOW,this.fileName="",this.base64Image="",this.image="",this.defectedReportFormGroup=new n.cw({name:new n.NI(null,[n.kI.required]),priority:new n.NI(null,[n.kI.required]),description:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Name",formControlName:"name",type:"text",id:"name",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Priority",formControlName:"priority",type:"text",id:"priority",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:[]}},{placeholder:"Description",formControlName:"description",type:"text",id:"description",errorMessage:"this field is required",element:l.Q.TEXTAREA}]}ngOnInit(){this.checkDefectLevel()}fileUploaded(t){this.fileName=t.fileName,this.base64Image=t.imageBase64}formSubmitted(t){if(this.base64Image){let o={...t.value,image:this.base64Image};this.callCrudApi(o)}else this.messageService.add({severity:"error",summary:"Error",detail:"Image is required"})}checkDefectLevel(){this.defectReportService.getByID(this.equId,"employee/equipment").subscribe(t=>{this.defectLevel=t.result.defectLevel,this.inputs.find(r=>"priority"===r.formControlName).dropdownOpt.options=this.defectLevel==h.I.LOW?Object.values(u.Sh):this.defectLevel==h.I.MEDIUM?[h.I.MEDIUM,h.I.HIGH]:this.defectLevel==h.I.HIGH?[h.I.HIGH]:[]})}callCrudApi(t){this.defectReportService.addToID(t,this.reportId,"employee/report/defect").subscribe(o=>{o.success&&this.closeDialog.emit()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(_.ez))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-add-defect-to-report-dialog-content"]],inputs:{reportId:"reportId",equId:"equId"},outputs:{closeDialog:"closeDialog"},decls:3,vars:3,consts:[["position","bottom-right"],[3,"changeFile","fileUploaded"],[3,"inputs","formControlFromParent","formSubmitted"]],template:function(t,o){1&t&&(e._UZ(0,"p-toast",0),e.TgZ(1,"app-file-uploader",1),e.NdJ("fileUploaded",function(a){return o.fileUploaded(a)}),e.qZA(),e.TgZ(2,"app-input-form",2),e.NdJ("formSubmitted",function(a){return o.formSubmitted(a)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("changeFile",!!o.image),e.xp6(1),e.Q6J("inputs",o.inputs)("formControlFromParent",o.defectedReportFormGroup))},dependencies:[j.FN,N.E,B.G]}),i})();function Y(i,p){if(1&i&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&i){const t=p.$implicit,o=e.oxw();e.xp6(1),e.AsE(" ",t," : ",o.equipmentInfo[t]," ")}}function G(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.callAction({action:"add"}))}),e.qZA()}}function V(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-report-dialog-content",13),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("action",t.action)("reportId",t.reportId)("equId",t.equipmentID)}}function H(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-add-defect-to-report-dialog-content",14),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("equId",t.equipmentID)("reportId",t.reportId)}}const z=function(){return{width:"50vw"}},W=function(){return{"960px":"75vw","640px":"100vw"}},X=function(){return{width:"450px"}};let K=(()=>{class i extends y.c{constructor(t,o,r){super(r),this.reportService=t,this.confirmationService=o,this.equipmentID=this.route.snapshot.paramMap.get("equipmentID"),this.cols=[],this.reportId="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Report",this.isLastReportCompleted=!1,this.defectReportAction=[{actionFunction:"defectToReport",icon:"pi pi-file-excel",isConditionalAction:!0,style:"p-button-rounded p-button-warning",conditionalByRow:{data:u.R8.UNCOMLPETED,field:"status"}},{actionFunction:"completeReport",icon:"pi pi-check",isConditionalAction:!0,style:"p-button-rounded p-button-success",conditionalByRow:{data:u.R8.UNCOMLPETED,field:"status"}},{actionFunction:"supReport",icon:"pi pi-folder",isConditionalAction:!0,style:"p-button-rounded p-button-secondary"}],this.isAddDefect=!1,this.equipmentInfoKeys=[]}ngOnInit(){this.getEquipmentInfo(),this.getAllReports()}getEquipmentInfo(){this.reportService.getByID(this.equipmentID,"employee/equipment/info").subscribe(t=>{t.success&&(this.equipmentInfo=t.result[0],delete this.equipmentInfo.__v,delete this.equipmentInfo._id,this.equipmentInfo=(0,R.tU)(this.equipmentInfo),this.equipmentInfoKeys=Object.keys(this.equipmentInfo))})}getAllReports(){this.cols=[{field:"reportName",header:"Report Name",rowType:s.b.NORMAL},{field:"dateOfExamination",header:"Date Of Examination",rowType:s.b.NORMAL},{field:"status",header:"Status",rowType:s.b.ENUM,enumTdObj:{[u.R8.COMPLETED]:"bg-success rounded text-white p-2",[u.R8.UNCOMLPETED]:"bg-danger rounded text-white p-2"}},{field:"inspector",header:"Inspector",rowType:s.b.NORMAL},{field:"createdAt",header:"createdAt",rowType:s.b.DATE}],this.reportService.getAll("employee/report/"+this.equipmentID+"/report").subscribe(t=>{t.success&&(this.reports=t.result,this.checkIfLastReportCompleted())})}checkIfLastReportCompleted(){this.isLastReportCompleted=!this.reports[0]||this.reports[0]?.status==u.R8.COMPLETED}callAction(t){switch(this.reportId=t.id,this.isAddDefect=!1,t.action){case"add":this.action="add",this.display=!0;break;case"details":this.action="details",this.display=!0;break;case"edit":this.action="edit",this.display=!0;break;case"delete":this.delete();break;case"defectToReport":this.action="edit",this.display=!0,this.isAddDefect=!0;break;case"completeReport":this.completeReportFunction();break;case"supReport":this.goToSupReports()}}delete(){this.confirmationService.confirm({message:"Are you sure you want to delete?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.reportService.delete(this.reportId,"employee/report").subscribe(t=>{t.success&&this.close()})}})}completeReportFunction(){this.confirmationService.confirm({message:"Do you want to set that report as COMPLETE?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.reportService.update({},this.reportId,"employee/report/complete").subscribe(t=>{t.success&&this.close()})}})}goToSupReports(){this.router.navigate(["employeepanel/empSupReport/"+this.reportId])}close(){this.display=!1,this.getAllReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(_.YP),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-report-employee-page"]],features:[e.qOj],decls:16,vars:26,consts:[[1,"m-2","p-2","pt-0"],[1,"text-center","text-bg-success"],[1,"container","row","m-2","mt-0"],["class","col-12",4,"ngFor","ngForOf"],[1,"header","d-flex","justify-content-between","p-3"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus","class","mr-2 rounded",3,"click",4,"ngIf"],[3,"isActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"action","reportId","equId","closeDialog",4,"ngIf"],[3,"equId","reportId","closeDialog",4,"ngIf"],["acceptButtonStyleClass","save-btn","rejectButtonStyleClass","cancel-btn",3,"acceptLabel","rejectLabel"],[1,"col-12"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"mr-2","rounded",3,"click"],[3,"action","reportId","equId","closeDialog"],[3,"equId","reportId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Equipment info"),e.qZA(),e.TgZ(3,"p-card",2),e.YNc(4,Y,2,2,"div",3),e.qZA()(),e.TgZ(5,"div",4)(6,"h3"),e._uU(7),e.qZA(),e.YNc(8,G,1,0,"button",5),e.qZA(),e.TgZ(9,"app-data-table",6),e.NdJ("actionClicked",function(a){return o.callAction(a)}),e.qZA(),e.TgZ(10,"p-dialog",7),e.NdJ("visibleChange",function(a){return o.display=a}),e.YNc(11,V,1,3,"app-employee-report-dialog-content",8),e.YNc(12,H,1,2,"app-employee-add-defect-to-report-dialog-content",9),e.qZA(),e._UZ(13,"p-confirmDialog",10),e.ALo(14,"translate"),e.ALo(15,"translate")),2&t&&(e.xp6(4),e.Q6J("ngForOf",o.equipmentInfoKeys),e.xp6(3),e.hij("",o.pageTitle," Page"),e.xp6(1),e.Q6J("ngIf",o.isLastReportCompleted),e.xp6(1),e.Q6J("isActions",!0)("cols",o.cols)("data",o.reports)("conditionalAction",o.defectReportAction),e.xp6(1),e.Akn(e.DdM(23,z)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(24,W))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display&&!o.isAddDefect),e.xp6(1),e.Q6J("ngIf",o.display&&o.isAddDefect),e.xp6(1),e.Akn(e.DdM(25,X)),e.s9C("acceptLabel",e.lcZ(14,19,"YES")),e.s9C("rejectLabel",e.lcZ(15,21,"NO")))},dependencies:[b.sg,b.O5,I.Hq,D.V,T.Q,J.Z,C.Q,U,E,w.X$]}),i})();var $=d(8498),ee=d(7919);const te=function(i){return{"sidebar-collapsed":i}},oe=function(i,p){return{"pi-chevron-left":i,"pi-chevron-right":p}},ie=function(i){return{content:i}};let ne=(()=>{class i extends y.c{constructor(t,o){super(t),this.authService=o,this.visibleSidebar1=!1,this.isSidebarCollapsed=!1}ngOnInit(){localStorage.getItem("hoistLang")||localStorage.setItem("hoistLang","en-US"),this.items=[{label:"Dashboard",icon:"pi pi-fw pi-home",routerLink:"dashboard"},{label:"Equipments",icon:"pi pi-fw pi-wrench",routerLink:"equipment"},{label:"Client Notification",icon:"pi pi-bell",routerLink:"notification"}]}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}handleLogout(){this.authService.logout(!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.zs3),e.Y36($.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-layout-page"]],features:[e.qOj],decls:12,vars:11,consts:[[1,"position-relative"],[1,"d-flex","flex-column","flex-shrink-0","p-3","text-white","side-grediant-background","justify-content-between","sidebar",3,"ngClass"],["href","/adminpanel/dashboard",1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","text-white","text-decoration-none"],["src","../../../assets/images/Final logo.png",1,"img-fluid",2,"height","30px","margin","0 auto"],[3,"model"],["pButton","","pRipple","","type","button","label","Logout","icon","pi pi-sign-out",1,"p-button-raised","p-button-danger","mt-2","fw-bold","text-start",3,"click"],["type","button",1,"btn","toggle-btn","position-absolute","translate-middle-y","btn-toggle-sidebar",3,"click"],[1,"pi",3,"ngClass"],[1,"d-flex","flex-column",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"a",2),e._UZ(4,"img",3),e.qZA(),e._UZ(5,"hr")(6,"p-panelMenu",4),e.qZA(),e.TgZ(7,"a",5),e.NdJ("click",function(){return o.handleLogout()}),e.qZA()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return o.toggleSidebar()}),e._UZ(9,"i",7),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"router-outlet"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(4,te,o.isSidebarCollapsed)),e.xp6(5),e.Q6J("model",o.items),e.xp6(3),e.Q6J("ngClass",e.WLB(6,oe,o.isSidebarCollapsed,!o.isSidebarCollapsed)),e.xp6(1),e.Q6J("ngClass",e.VKq(9,ie,!o.isSidebarCollapsed)))},dependencies:[b.mk,A.lC,I.Hq,ee.f3],styles:[".side-grediant-background[_ngcontent-%COMP%]{background:#f8f8f8}  .p-panelmenu .p-panelmenu-content .p-menuitem .p-menuitem-link .p-menuitem-text,   .p-panelmenu .p-panelmenu-content .p-menuitem .p-menuitem-link:not(.p-disabled):hover .p-menuitem-text{color:var(--bs-dark)!important}  .p-panelmenu-header-link, .p-menuitem[_ngcontent-%COMP%], .p-submenu-list[_ngcontent-%COMP%], .p-panelmenu[_ngcontent-%COMP%]   .p-panelmenu-content[_ngcontent-%COMP%]{color:var(--bs-dark)!important;background:transparent!important}  .p-panelmenu .p-panelmenu-header>a{border:none}  .p-panelmenu .p-panelmenu-header>a:focus{transition:all .7s ease-in-out;outline:none!important}  .p-panelmenu .p-panelmenu-header>a:hover{transition:all .3s ease-in-out;background-color:#bbbbbb41!important;color:#fff}  .p-panelmenu .p-panelmenu-content{background-color:#ececec!important;border:1px solid #ccc!important;box-shadow:0 2px 5px #0000001a!important}  .p-panelmenu .p-menuitem{padding:.5rem 1rem!important}  .p-panelmenu .p-menuitem-link{color:#fff!important}  .p-panelmenu .p-menuitem-link:hover{background-color:#e4e4e4!important;color:#fff!important}.sidebar-collapsed[_ngcontent-%COMP%]{display:none!important}.sidebar-collapsed[_ngcontent-%COMP%]{max-width:100vh!important;min-height:100vh!important}.btn-toggle-sidebar[_ngcontent-%COMP%]{background-color:#464646;color:#fff;left:0;top:70px;border:none;position:fixed!important;bottom:20vh;width:40px;height:40px;border-radius:50%;z-index:1000}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;min-height:100vh;z-index:1000;overflow-y:auto}.content[_ngcontent-%COMP%]{margin-left:235px}"]}),i})(),re=(()=>{class i extends y.c{constructor(t,o){super(o),this.defectedReportService=t,this.cols=[],this.reportId="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Notification",this.goToDefectedAction=[{actionFunction:"goToDefected",icon:"pi pi-arrow-right",isConditionalAction:!0,style:"p-button-rounded p-button-info"}]}ngOnInit(){this.getAllReports()}getAllReports(){this.cols=[{field:"departmentName",header:"Department Name",rowType:s.b.NORMAL},{field:"serialNumber",header:"Serial Number",rowType:s.b.NORMAL},{field:"categoryName",header:"Category Name",rowType:s.b.NORMAL},{field:"typeName",header:"Type Name",rowType:s.b.NORMAL},{field:"location",header:"Location",rowType:s.b.NORMAL},{field:"reportName",header:"Report Name",rowType:s.b.NORMAL},{field:"createdAt",header:"Created At",rowType:s.b.DATE},{field:"defectLevel",header:"Defect Level",rowType:s.b.ENUM,enumTdObj:{[u.Sh.LOW]:"bg-success rounded text-white p-2",[u.Sh.MEDIUM]:"bg-warning rounded text-white p-2",[u.Sh.HIGH]:"bg-danger rounded text-white p-2"}},{field:"isClientRespond",header:"Did Client Respond",rowType:s.b.BOOLEAN},{field:"isInspectorRespond",header:"Did Inspector Respond",rowType:s.b.BOOLEAN},{field:"defectStatus",header:"Defect Status",rowType:s.b.ENUM,enumTdObj:{[u.tz.FIXED]:"bg-success rounded text-white p-2",[u.tz.IGNORED]:"bg-warning rounded text-white p-2",[u.tz.QUARANTINED]:"bg-danger rounded text-white p-2"}}],this.defectedReportService.getAll("employee/report/defect").subscribe(t=>{t.success&&(this.reports=t.result)})}callAction(t){this.reportId=t.id,this.goToDefected()}goToDefected(){this.router.navigate(["/employeepanel/notificationResponse/"+this.reportId])}close(){this.display=!1,this.getAllReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification-employee-page"]],features:[e.qOj],decls:4,vars:6,consts:[[1,"header","d-flex","justify-content-between","p-3"],[3,"isActions","isMainActions","cols","data","conditionalAction","actionClicked"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2),e.qZA()(),e.TgZ(3,"app-data-table",1),e.NdJ("actionClicked",function(a){return o.callAction(a)}),e.qZA()),2&t&&(e.xp6(2),e.hij("",o.pageTitle," Page"),e.xp6(1),e.Q6J("isActions",!0)("isMainActions",!1)("cols",o.cols)("data",o.reports)("conditionalAction",o.goToDefectedAction))},dependencies:[C.Q]}),i})();var O=d(2174);let ae=(()=>{class i{constructor(t){this.defectedReportsService=t,this.closeDialog=new e.vpe,this.defectedResponseFormGroup=new n.cw({inspectorResponse:new n.NI(null,[n.kI.required]),inspectorComment:new n.NI(null,[n.kI.required])}),this.inputs=[{placeholder:"Inspector Comment",formControlName:"inspectorComment",type:"text",id:"inspectorComment",errorMessage:"this field is required",element:l.Q.INPUT},{placeholder:"Action",formControlName:"inspectorResponse",type:"text",id:"inspectorResponse",errorMessage:"this field is required",element:l.Q.DROPDOWM,dropdownOpt:{options:Object.values(u.Xt)}}]}ngOnInit(){}formSubmitted(t){let o={...t.value};this.callCrudApi(o)}callCrudApi(t){this.defectedReportsService.update(t,this.defectedReportId,"employee/report/defect").subscribe(o=>{o.success&&this.closeDialog.emit()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-notification-responsd-dialog-content"]],inputs:{defectedReportId:"defectedReportId"},outputs:{closeDialog:"closeDialog"},decls:1,vars:2,consts:[[3,"inputs","formControlFromParent","formSubmitted"]],template:function(t,o){1&t&&(e.TgZ(0,"app-input-form",0),e.NdJ("formSubmitted",function(a){return o.formSubmitted(a)}),e.qZA()),2&t&&e.Q6J("inputs",o.inputs)("formControlFromParent",o.defectedResponseFormGroup)},dependencies:[N.E]}),i})();const pe=function(i){return{color:i}};function se(i,p){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"p",10),e._uU(3),e.qZA(),e.TgZ(4,"h3",11),e._uU(5),e.qZA()()()),2&i){const t=p.$implicit,o=e.oxw(2);e.xp6(3),e.Oqu(t),e.xp6(1),e.Q6J("ngStyle",e.VKq(3,pe,o.reportInfo[t]?"initial":"red")),e.xp6(1),e.hij(" ",o.reportInfo[t]||"No Data"," ")}}function le(i,p){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,se,6,5,"div",7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.reportInfoKeys)}}function de(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-notification-responsd-dialog-content",12),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("defectedReportId",t.defectedReportID)}}const ce=function(){return{width:"50vw"}},me=function(){return{"960px":"75vw","640px":"100vw"}};let ue=(()=>{class i extends y.c{constructor(t,o){super(o),this.defectedReportService=t,this.reportId=this.route.snapshot.paramMap.get("reportID"),this.cols=[],this.defectedReportID="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Response",this.defectReportAction=[{actionFunction:"changeResponse",icon:"pi pi-eject",isConditionalAction:!0,style:"p-button-rounded"}],this.reportInfoKeys=[]}ngOnInit(){this.getAllDefectedReports()}getAllDefectedReports(){this.cols=[{field:"name",header:"Name",rowType:s.b.NORMAL},{field:"description",header:"Description",rowType:s.b.NORMAL},{field:"image",header:"Image",rowType:s.b.IMAGE},{field:"status",header:"status",rowType:s.b.ENUM,enumTdObj:{[u.tz.FIXED]:"bg-success rounded text-white p-2",[u.tz.IGNORED]:"bg-warning rounded text-white p-2",[u.tz.QUARANTINED]:"bg-danger rounded text-white p-2"}},{field:"comment",header:"Comment",rowType:s.b.NORMAL},{field:"clientName",header:"Client Name",rowType:s.b.NORMAL},{field:"inspectorResponse",header:"Inspector Response",rowType:s.b.ENUM,enumTdObj:{[u.Xt.ACCEPTED]:"bg-success rounded text-white p-2",[u.Xt.REJECTED]:"bg-danger rounded text-white p-2"}}],this.defectedReportService.getByID(this.reportId,"employee/report/defect").subscribe(t=>{t.success&&(this.reports=t.result.defect,this.reportInfo=t.result,delete this.reportInfo.defect,delete this.reportInfo.__v,delete this.reportInfo._id,this.reportInfo=(0,R.tU)(this.reportInfo),this.reportInfo=(0,R.g$)(this.reportInfo),this.reportInfoKeys=Object.keys(this.reportInfo))})}callAction(t){this.defectedReportID=t.id,this.display=!0}close(){this.display=!1,this.getAllDefectedReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification-response-employee-page"]],features:[e.qOj],decls:7,vars:14,consts:[[1,"m-2","p-2","pt-0"],["header","Report info"],["pTemplate","content"],[3,"isActions","isMainActions","cols","data","conditionalAction","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"defectedReportId","closeDialog",4,"ngIf"],[1,"col-12","d-flex","flex-wrap","gap-4"],["class","wrapper",4,"ngFor","ngForOf"],[1,"wrapper"],[1,"single-card","px-4","py-1","shadow"],[1,"m-0"],[1,"mt-1",3,"ngStyle"],[3,"defectedReportId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"p-accordion")(2,"p-accordionTab",1),e.YNc(3,le,2,1,"ng-template",2),e.qZA()()(),e.TgZ(4,"app-data-table",3),e.NdJ("actionClicked",function(a){return o.callAction(a)}),e.qZA(),e.TgZ(5,"p-dialog",4),e.NdJ("visibleChange",function(a){return o.display=a}),e.YNc(6,de,1,1,"app-employee-notification-responsd-dialog-content",5),e.qZA()),2&t&&(e.xp6(4),e.Q6J("isActions",!0)("isMainActions",!1)("cols",o.cols)("data",o.reports)("conditionalAction",o.defectReportAction),e.xp6(1),e.Akn(e.DdM(12,ce)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(13,me))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display))},dependencies:[b.sg,b.O5,b.PC,_.jx,D.V,O.UQ,O.US,C.Q,ae],styles:[".single-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.single-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10 px}.single-card[_ngcontent-%COMP%]{border-left-width:5px;border-left-color:#0069d9;border-left-style:solid}.wrapper[_ngcontent-%COMP%]{max-width:20%}"]}),i})();var fe=d(2397);function he(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.callAction({action:"defectToReport"}))}),e.qZA()}}function ge(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.callAction({action:"completeReport"}))}),e.qZA()}}function be(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.callAction({action:"add"}))}),e.qZA()}}function ye(i,p){if(1&i){const t=e.EpF();e.TgZ(0,"app-employee-add-defect-to-report-dialog-content",11),e.NdJ("closeDialog",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.close())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("equId",t.equipmentID)("reportId",t.reportId)}}const _e=function(){return{maxWidth:"80vw",maxHeight:"90vh",minHeight:"40vh",minWidth:"40vw"}},Ce=function(){return{"960px":"75vw","640px":"100vw"}},Ie=function(){return{width:"450px"}},Ne=[{path:"",component:ne,children:[{path:"dashboard",component:fe.c},{path:"equipment",component:Q},{path:"notification",component:re},{path:"empSupReport/:reportId",component:(()=>{class i extends y.c{constructor(t,o,r,a){super(a),this.reportService=t,this.confirmationService=o,this.location=r,this.reportId=this.route.snapshot.paramMap.get("reportId"),this.cols=[],this.supReportId="",this.reports=[],this.display=!1,this.action="new",this.pageTitle="Sup Reports",this.isCompleted=!1,this.isAddDefect=!1,this.equipmentID=""}ngOnInit(){this.getAllReports(),this.checkIfReportIsApproved()}getAllReports(){this.cols=[{field:"reportName",header:"Report Name",rowType:s.b.NORMAL},{field:"name",header:"Name",rowType:s.b.NORMAL},{field:"type",header:"Type",rowType:s.b.NORMAL},{field:"createdAt",header:"createdAt",rowType:s.b.DATE}],this.reportService.getAll("employee/report/"+this.reportId+"/sub-report").subscribe(t=>{t.success&&(this.reports=t.result)})}checkIfReportIsApproved(){this.reportService.getByID(this.reportId,"employee/report").subscribe(t=>{this.equipmentID=t.result.equipment,this.isCompleted=t.result?.status==u.R8.COMPLETED})}callAction(t){switch(this.supReportId=t.id,this.isAddDefect=!1,t.action){case"add":this.action="add",this.display=!0;break;case"details":this.action="details",this.display=!0;break;case"edit":this.action="edit",this.display=!0;break;case"delete":this.delete();break;case"defectToReport":this.action="edit",this.display=!0,this.isAddDefect=!0;break;case"completeReport":this.completeReportFunction()}}delete(){this.confirmationService.confirm({message:"Are you sure you want to delete?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.reportService.delete(this.supReportId,"employee/report/sub-report").subscribe(t=>{t.success&&this.close()})}})}completeReportFunction(){this.confirmationService.confirm({message:"Do you want to set that report as COMPLETE?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.reportService.update({},this.reportId,"employee/report/complete").subscribe(t=>{t.success&&this.location.back()})}})}close(){this.display=!1,this.getAllReports()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.I),e.Y36(_.YP),e.Y36(b.Ye),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-emp-sup-reports-page"]],features:[e.qOj],decls:13,vars:25,consts:[[1,"header","d-flex","justify-content-between","p-3"],["pButton","","pRipple","","label","Add Defect","icon","pi pi-file-excel","class","me-2 rounded bg-warning",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Complete Report","icon","pi pi-check","class","me-2 rounded bg-success",3,"click",4,"ngIf"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus","class","mr-2 rounded",3,"click",4,"ngIf"],[3,"isActions","cols","data","actionClicked"],[3,"visible","dismissableMask","breakpoints","header","visibleChange"],[3,"equId","reportId","closeDialog",4,"ngIf"],["acceptButtonStyleClass","save-btn","rejectButtonStyleClass","cancel-btn",3,"acceptLabel","rejectLabel"],["pButton","","pRipple","","label","Add Defect","icon","pi pi-file-excel",1,"me-2","rounded","bg-warning",3,"click"],["pButton","","pRipple","","label","Complete Report","icon","pi pi-check",1,"me-2","rounded","bg-success",3,"click"],["pButton","","pRipple","","label","Add New","icon","pi pi-plus",1,"mr-2","rounded",3,"click"],[3,"equId","reportId","closeDialog"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e.YNc(4,he,1,0,"button",1),e.YNc(5,ge,1,0,"button",2),e.YNc(6,be,1,0,"button",3),e.qZA()(),e.TgZ(7,"app-data-table",4),e.NdJ("actionClicked",function(a){return o.callAction(a)}),e.qZA(),e.TgZ(8,"p-dialog",5),e.NdJ("visibleChange",function(a){return o.display=a}),e.YNc(9,ye,1,2,"app-employee-add-defect-to-report-dialog-content",6),e.qZA(),e._UZ(10,"p-confirmDialog",7),e.ALo(11,"translate"),e.ALo(12,"translate")),2&t&&(e.xp6(2),e.hij("",o.pageTitle," Page"),e.xp6(2),e.Q6J("ngIf",!o.isCompleted),e.xp6(1),e.Q6J("ngIf",!o.isCompleted),e.xp6(1),e.Q6J("ngIf",!o.isCompleted),e.xp6(1),e.Q6J("isActions",!0)("cols",o.cols)("data",o.reports),e.xp6(1),e.Akn(e.DdM(22,_e)),e.Q6J("visible",o.display)("dismissableMask",!0)("breakpoints",e.DdM(23,Ce))("header",o.action+" "+o.pageTitle),e.xp6(1),e.Q6J("ngIf",o.display&&o.isAddDefect),e.xp6(1),e.Akn(e.DdM(24,Ie)),e.s9C("acceptLabel",e.lcZ(11,18,"YES")),e.s9C("rejectLabel",e.lcZ(12,20,"NO")))},dependencies:[b.O5,I.Hq,D.V,T.Q,C.Q,E,w.X$]}),i})()},{path:"report/:equipmentID",component:K},{path:"notificationResponse/:reportID",component:ue}]}];let Ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[A.Bz.forChild(Ne),A.Bz]}),i})(),Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[_.YP],imports:[x.h,S.L,Ae]}),i})()}}]);